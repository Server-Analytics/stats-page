<div class="flex btw align-center">
    <div class="flex align-center">
        <div class="top-stats-button" onclick="displayModal('messages-tab_timerangeModal');">
            <i class="fas fa-history"></i> <span id="messages-tab_timerangeIndicatorButton">...</span> <i class="fas fa-chevron-down"></i>
        </div>
    </div>
    <div class="flex icon-button-container align-center">
        <div class="top-stats-button icon-button d-sm-none" onclick="displayModal('coming_soon_modal');"><i class="fas fa-bezier-curve"></i></div>
        <div class="top-stats-button icon-button d-sm-none" onclick="displayModal('coming_soon_modal');"><i class="fas fa-palette"></i></div>
        <div class="top-stats-button icon-button d-lg-none" onclick="displayModal('coming_soon_modal');"><i class="fas fa-folder-plus"></i></div>
    </div>
</div>

<div class="w-100p flex wrap align-center">

    <div class="w-100p flex mobile-wrap">
        <!-- Graph 1 (Members) -->
        <div class="stats-box large col-lg-8 col-xs-12" id="CONTAINER_chartMembersTabMessages">
            <div class="col-lg-9 col-xs-12">

                <canvas id="chartMessages_TabMessages" width="100%"></canvas>
                <script>
                    drawChart("chartMessages_TabMessages", {
                        "datasets": {
                            labels: DATAS_statsDatas.readableDate.slice(),
                            datasets: [{
                                label: 'Membres',
                                data: DATAS_statsDatas.messages.slice(),
                                backgroundColor: 'rgba(114,137,218,0.4)',
                                borderColor: '#4a64b8',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            beginAtZero: false
                        },
                        "externalDatas": {
                            timestamps: DATAS_statsDatas.date.slice(),
                            processMethod: "set",
                            dataGroupPrecision: 1.5
                        }
                    });
                </script>
            </div>
            <div class="stats-info col-lg-3 d-sm-none">
                <div class="flex align-center primary-stats">
                    <h1 class="font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="messages">...</h1>
                </div>
                <h4 class="font-family-arial">Messages</h4>
                <div class="flex align-center secondary-stats">
                    <h3 class="font-family-arial" data-stats-method="average-indicator-text" data-stats-id="messages-tab" data-stats-type="messages">
                        <span class="indicator equal">=</span> ...
                    </h3>
                    <h5><i class="fas fa-comment-alt"></i></h5>
                </div>
                <h5 class="font-family-arial" data-stats-type="stats-text-indicator">Messages en {indicator}</h5>
            </div>
            <div class="stats-info-mobile d-lg-none col-xs-12 flex">
                <div class="primary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="messages">...</h3>
                    <h5 class="font-family-arial">Messages</h5>
                </div>
                <div class="separator"></div>
                <div class="secondary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="average-simpleIndicator" data-stats-type="messages">...</h3>
                    <h5 class="font-family-arial" data-stats-method="average-indicator-text">De {indicator} qu'en moyenne</h5>
                </div>
            </div>
        </div>

        <!-- Stats #2 - Mentions/Pings -->
        <div class="stats-box tip-overflow-visible right small col-lg-4 col-xs-12 flex box-center">
            <div class="head d-sm-none">
                <div class="flex btw w-100p">
                    <h4><i class="fas fa-comments"></i> Messages par membre</h4>
                    <div class="hover-tooltip force-display-on-left">
                        <h4><i class="color-grey fas fa-question-circle"></i></h4>
                        <span class="hover-tooltiptext">Messages envoyés en moyenne par chaque membre. Cette statistique révèle la réelle activité du serveur, elle est très importante !</span>
                    </div>
                </div>
            </div>
            <div class="body">
                <div class="flex wrap center">
                    <div class="flex center w-100p text align-center d-sm-none">
                        <h1 data-stats-id="messages-tab" data-stats-method="divide-members-global,datatype" data-stats-save-value="messagePerMemberActivity" data-stats-type="messages">...</h1>
                        <h2><i class="fas fa-comment-alt"></i></h2>
                    </div>
                    <div class="flex center w-100p d-lg-none align-center">
                        <h2 data-stats-id="messages-tab" data-stats-method="divide-members-global,datatype" data-stats-type="messages">...</h2>
                        <h4><i class="fas fa-comment-alt"></i></h4>
                    </div>
                    <div>
                        <h4>Messages par membre</h4>
                        <h5 class="moyenne">
                            <span data-stats-id="messages-tab" data-stats-method="average-statIndicator-messagePerMemberActivity" data-stats-type="mentions">
                            <i class="fas fa-chevron-up"></i> <strong>...</strong>
                        </span>
                        </h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Second stats line -->
    <div class="w-100p flex mobile-wrap">
        <!-- Small: doughnut joins vs leaves -->
        <div class="stats-box small col-lg-4 col-xs-12 static tip-overflow-visible">
            <div style="width:100%;height:18em;">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- square_responsive_ad -->
                <ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-2548566032630877" data-ad-slot="3986853067" data-ad-format="auto" data-full-width-responsive="true"></ins>
                <script>
                    window.onload = function() {
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    }
                </script>
            </div>
        </div>

        <!-- Large: messages-tab member line chart -->
        <div class="stats-box large right col-lg-8 col-xs-12" id="CONTAINER_chartTypetime_TabMessages">
            <div class="col-lg-9 col-xs-12">

                <canvas id="chartTypetime_TabMessages" width="100%"></canvas>
                <script>
                    drawChart("chartTypetime_TabMessages", {
                        datasets: {
                            labels: DATAS_statsDatas.readableDate.slice(),
                            datasets: [{
                                label: 'Temps passé à écrire',
                                data: DATAS_statsDatas.typetime ? DATAS_statsDatas.typetime.slice() : [],
                                backgroundColor: 'rgba(114,137,218,0.4)',
                                borderColor: '#4a64b8',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            beginAtZero: false,
                        },
                        "settings": {
                            tooltip: {
                                label: ": {label}",
                                formula: "time"
                            },
                            yAxis: {
                                label: ": {label}",
                                formula: "time"
                            }
                        },
                        "externalDatas": {
                            timestamps: DATAS_statsDatas.date.slice(),
                            processMethod: "sum",

                        }
                    });
                </script>
            </div>
            <div class="stats-info col-lg-3 d-sm-none">
                <div class="flex align-center primary-stats">
                    <h1 class="font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="typetime" data-stats-format="time">...</h1>
                </div>
                <h4 class="font-family-arial">Passés à écrire</h4>
                <div class="flex align-center secondary-stats">
                    <h3 class="font-family-arial" data-stats-method="comparison-indicator-text" data-stats-id="messages-tab" data-stats-type="typetime" data-stats-format="time">
                        <span class=" indicator equal">=</span> ...
                    </h3>
                    <h5><i class="fas fa-keyboard"></i></h5>
                </div>
                <h5 class="font-family-arial" data-stats-type="stats-text-indicator">De {indicator} qu'en moyenne</h5>
            </div>
            <div class="stats-info-mobile d-lg-none col-xs-12 flex">
                <div class="primary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="typetime" data-stats-format="time">...</h3>
                    <h5 class=" font-family-arial">Passés à écrire</h5>
                </div>
                <div class="separator"></div>
                <div class="secondary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="average-simpleIndicator" data-stats-type="typetime" data-stats-format="time">...</h3>
                    <h5 class="font-family-arial" data-stats-method="average-indicator-text">De {indicator} qu'en moyenne</h5>
                </div>
            </div>
        </div>
    </div>

    <!-- Thrid stats line -->
    <div class="w-100p flex mobile-wrap">
        <!-- Large: voice_time line graph -->
        <div class="stats-box large col-lg-8 col-xs-12" id="CONTAINER_chartMessagesTab_mentions">
            <div class="col-lg-9 col-xs-12">

                <canvas id="chartMessagesTab_mentions" width="100%"></canvas>
                <script>
                    drawChart("chartMessagesTab_mentions", {
                        "datasets": {
                            labels: DATAS_statsDatas.readableDate.slice(),
                            datasets: [{
                                label: 'Mentions',
                                data: DATAS_statsDatas.mentions ? DATAS_statsDatas.mentions.slice() : [],
                                backgroundColor: 'rgba(114,137,218,0.4)',
                                borderColor: '#4a64b8',
                                borderWidth: 1
                            }],
                        },
                        "externalDatas": {
                            timestamps: DATAS_statsDatas.date.slice(),
                            processMethod: "sum"
                        }
                    });
                </script>
            </div>
            <div class="stats-info col-lg-3 d-sm-none">
                <div class="flex align-center primary-stats">
                    <h1 class="font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="mentions">...</h1>
                </div>
                <h4 class="font-family-arial">Mentions</h4>
                <div class="flex align-center secondary-stats">
                    <h3 class="font-family-arial" data-stats-method="average-indicator-text" data-stats-id="messages-tab" data-stats-type="mentions">...</h3>
                    <h5><i class="fas fa-at"></i></h5>
                </div>
                <h5 class="font-family-arial" data-stats-type="stats-text-indicator">De {indicator} qu'en moyenne</h5>
            </div>
            <div class="stats-info-mobile d-lg-none col-xs-12 flex">
                <div class="primary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="mentions">...</h3>
                    <h5 class="font-family-arial">Mentions</h5>
                </div>
                <div class="separator"></div>
                <div class="secondary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="average-simpleIndicator" data-stats-type="mentions">...</h3>
                    <h5 class=" font-family-arial" data-stats-method="average-indicator-text">De {indicator} qu'en moyenne</h5>
                </div>
            </div>
        </div>

        <!-- Small: doughnut messages bots vs. humains -->
        <div class="stats-box small col-lg-4 col-xs-12 static right">
            <div class="w-100p">

                <div class="head static">
                    <h4><i class="fas fa-history"></i> Origine des messages</h4>
                </div>
                <div class="flex center relative">

                    <!-- ERROR datas not available yet -->
                    <div class="graph-error small-error" id="error-graph-template">
                        <h4><i class="fas fa-exclamation-triangle"></i> Pas encore disponible !</h4>
                    </div>
                    <!-- ERROR datas not available yet -->

                    <div class="body flex center w-100p">
                        <canvas id="botsHumains_tabMessages" width="80%"></canvas>
                        <script>
                            drawPieChart("botsHumains_tabMessages", {
                                "datasets": {
                                    labels: ['Humains', 'Bots'],
                                    datasets: [{
                                        label: 'Messages',
                                        data: [360, 56],
                                        backgroundColor: ["#5B78DA", "#435BA8"],
                                        borderColor: ["#5B78DA", "#435BA8"],
                                        hoverBackgroundColor: "#94a7eb",
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    type: "doughnut"
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fourth stats line -->
    <div class="w-100p flex mobile-wrap">
        <!-- Small: Advert. -->
        <div class="stats-box small col-lg-4 col-xs-12 static tip-overflow-visible">
            <div style="width:100%;height:18em;">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- square_responsive_ad -->
                <ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-2548566032630877" data-ad-slot="3986853067" data-ad-format="auto" data-full-width-responsive="true"></ins>
                <script>
                    window.onload = function() {
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    }
                </script>
            </div>
        </div>

        <!-- Large: messages-tab member line chart -->
        <div class="stats-box large right col-lg-8 col-xs-12" id="CONTAINER_deletedMessages_TabMessages">
            <div class="col-lg-9 col-xs-12">

                <canvas id="deletedMessages_TabMessages" width="100%"></canvas>
                <script>
                    drawChart("deletedMessages_TabMessages", {
                        datasets: {
                            labels: DATAS_statsDatas.readableDate.slice(),
                            datasets: [{
                                label: 'Messages supprimés',
                                data: DATAS_statsDatas.deletedMessages ? DATAS_statsDatas.deletedMessages.slice() : [],
                                backgroundColor: 'rgba(245, 103, 103,0.4)',
                                borderColor: 'rgb(245, 103, 103)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            beginAtZero: false,
                        },
                        "externalDatas": {
                            timestamps: DATAS_statsDatas.date.slice(),
                            processMethod: "sum",

                        }
                    });
                </script>
            </div>
            <div class="stats-info col-lg-3 d-sm-none">
                <div class="flex align-center primary-stats">
                    <h1 class="font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="deletedMessages">...</h1>
                </div>
                <h4 class="font-family-arial">Messages supprimés</h4>
                <div class="flex align-center secondary-stats">
                    <h3 class="font-family-arial" data-stats-method="average-indicator-text" data-stats-id="messages-tab" data-stats-type="deletedMessages">
                        <span class=" indicator equal">=</span> ...
                    </h3>
                    <h5><i class="fas fa-comment-slash"></i></h5>
                </div>
                <h5 class="font-family-arial" data-stats-type="stats-text-indicator">De {indicator} qu'en moyenne</h5>
            </div>
            <div class="stats-info-mobile d-lg-none col-xs-12 flex">
                <div class="primary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="total" data-stats-type="deletedMessages">...</h3>
                    <h5 class=" font-family-arial">Messages supprimés</h5>
                </div>
                <div class="separator"></div>
                <div class="secondary-stats">
                    <h3 class="no-break font-family-arial" data-stats-id="messages-tab" data-stats-method="average-simpleIndicator" data-stats-type="deletedMessages">...</h3>
                    <h5 class="font-family-arial" data-stats-method="average-indicator-text">De {indicator} qu'en moyenne</h5>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="w-100p flex btw">
    <div style="width:100%;height:10em;">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- square_responsive_ad -->
        <ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-2548566032630877" data-ad-slot="3986853067" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>
            window.onload = function() {
                (adsbygoogle = window.adsbygoogle || []).push({});
            }
        </script>
    </div>
    <div style="width:100%;height:10em;">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- square_responsive_ad -->
        <ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-2548566032630877" data-ad-slot="3986853067" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>
            window.onload = function() {
                (adsbygoogle = window.adsbygoogle || []).push({});
            }
        </script>
    </div>
</div>

<!-- Modals -->
<div id="messages-tab_timerangeModal" class="modal-element-container">
    <div class="flex line-center">
        <div class="modal-element col-lg-5 col-sm-10 col-xs-11 hide-scrollbar">
            <div class="modal-element-header flex align-center btw">
                <div>
                    <h4 class="title">Plage de données</h4>
                </div>
                <div>
                    <h3 class="cancel-button" onclick="closeModal('messages-tab_timerangeModal');">&times;</h3>
                </div>
            </div>
            <div class="modal-element-body" id="messages-tab_timespampModal">
            </div>
        </div>
    </div>
</div>

<script>
    overwriteStats("messages-tab");
</script>